#!/usr/bin/env python
import argparse
import axiom as ax
from axiom.validate.validator import Validator
from axiom.validate.specification import SPECIFICATIONS


if __name__ == '__main__':

    valid_specs = SPECIFICATIONS.keys()

    # Parse arguments for the script
    parser = argparse.ArgumentParser()
    parser.description = f'Axiom Validator v{ax.__version__}'
    parser.add_argument('input_path', type=str, help='Path to the file to validate.')
    parser.add_argument('-s', '--specification', type=str, help='Specification to validate against. Defaults to latest.', choices=valid_specs, default='latest')
    args = parser.parse_args()

    # Set up the validator
    specification = SPECIFICATIONS[args.specification]
    validator = Validator(specification)

    # Validate
    validator.validate(args.input_path)